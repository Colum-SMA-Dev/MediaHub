<!DOCTYPE html>
<html>
<head>
    <title>Socket.io with JWTs</title>
</head>
<body>
    <form id="login">
        <input type="text" id="username" value="john" />
        <input type="password" id="password" value="aaa" />
        <input type="submit" value="login">
    </form>

    <div>
        <button id="ping">Send Socket.io Ping</button>
    </div>

    <script src="//code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="http://localhost:3000/socket.io/socket.io.js"></script>

    <script>
        var token, socket;


        $('#ping').on('click', function () {
            console.log('- ping');
            socket.to('testing').emit('ping');
        });

        $('#login').submit(function (e) {
            e.preventDefault();


            var password = $('#password').val();
            socket = io.connect('localhost:3000');

            socket.on('pong', function () {
              console.log('- pong');
            }).on('time', function (data) {
              console.log('- broadcast: ' + data);
            }).on('authenticated', function () {
              console.log('- authenticated');
            }).on('disconnect', function () {
              console.log('- disconnected');
            });

            socket.emit('auth', password, function(success) {
              console.log('authenticate success? ' + success);
            });

        });
    </script>
</body>
</html>